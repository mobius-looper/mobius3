<!--

There are two types of symbols: Functions and Parameters

Symbols are divided into two main categories, those with Global scope
and those with Track scope.

Track parameters apply only to one track.

Some parameters are obsolete and retained only so that Symbols can be defined
for parsing and converting old objects like MobiusConfig, Setup, and Preset.
Once those models are fully converted, these symbols can be removed.

-->

<Symbols>
  <Function name="AutoRecord" sustainable='true' longHelp='Long press becomes Reset'
            mayFocus='true' mayCancelMute='true' tree='Recording'/>
  <Function name="Backward" mayFocus='true' mayCancelMute='true' tree='Movement'/>
  <Function name="Bounce" tree='Utility'/>
  <!-- this one needs work before it can be visible -->
  <Function name="Checkpoint" mayFocus='true' mayCancelMute='true' tree='Utility'
            options='noBinding'/>
  <Function name="Clear" mayFocus='true' mayCancelMute='true' tree='Recording'/>
  <Function name="Confirm" mayFocus='true' tree='Switch'/>
  <Function name="Divide" mayFocus='true' mayCancelMute='true' tree='Recording'/>
  <Function name="Divide3" mayFocus='true' mayCancelMute='true' tree='Recording'/>
  <Function name="Divide4" mayFocus='true' mayCancelMute='true' tree='Reocrding'/>
  <Function name="FocusLock" tree='Utility'/>
  <Function name="Forward" mayFocus='true' mayCancelMute='true' tree='Movement'/>
  <Function name="GlobalMute" global='true' tree='Track'/>
  <Function name="GlobalPause" global='true' tree='Movement'/>
  <Function name="GlobalReset" global='true' tree='Recording'/>
  <Function name="Halfspeed" mayFocus='true' mayCancelMute='true' tree='Speed'/>
  <!-- this was not sustainable at first, but it is in core, what does it mean? -->
  <Function name="Insert" mayFocus='true' mayCancelMute='true' tree='Recording'/>
  <Function name="InstantMultiply" mayFocus='true' tree='Recording'/>
  <!--
      these are similar to replicated functions but have been in use
      for a long time, think about this
      -->
  <Function name="InstantMultiply3" mayFocus='true' tree='Recording'/>
  <Function name="InstantMultiply4" mayFocus='true' tree='Recording'/>

  <!-- Formerly LoopN, Loop1, Loop2, etc. -->
  <Function name="SelectLoop" mayFocus='true' mayCancelMute='true' tree='Track'
            argumentHelp="Loop Number: 1-8"/>

  <Function name="MidiStart" tree='Sync'/>
  <Function name="MidiStop" tree='Sync'/>
  <Function name="Move" mayFocus='true' mayCancelMute='true' tree='Movement'/>
  <Function name="Multiply" sustainable='true' mayFocus='true' mayCancelMute='true' tree='Recording'/>
  <Function name="Mute" sustainable='true' mayFocus='true' tree='Track'/>
  <!-- core has this as a mayCancelMute, why? -->
  <Function name="MuteRealign" mayFocus='true' tree='Track'/>
  <Function name="MuteMidiStart" tree='MIDI'/>
  <Function name="NextLoop" mayFocus='true' mayCancelMute='true' tree='Track'/>
  <Function name="NextTrack" tree='Track'/>
  <Function name="Overdub" sustainable='true' mayFocus='true' mayCancelMute='true' tree='Recording'/>
  <Function name="Pause" sustainable='true' mayFocus='true' tree='Track' mayQuantize='true'/>
  <Function name="PitchDown" mayFocus='true' mayCancelMute='true' tree='Pitch' hidden='true'/>
  <Function name="PitchNext" mayFocus='true' mayCancelMute='true' tree='Pitch' hidden='true'/>
  <Function name="PitchCancel" mayFocus='true' mayCancelMute='true' tree='Pitch' hidden='true'/>
  <Function name="PitchPrev" mayFocus='true' mayCancelMute='true' tree='Pitch' hidden='true'/>
  <Function name="PitchStep" mayFocus='true' mayCancelMute='true' tree='Pitch' hidden='true'/>
  <Function name="PitchUp" mayFocus='true' mayCancelMute='true' tree='Pitch' hidden='true'/>
  <Function name="Play" mayFocus='true' tree='Recording'/>
  <Function name="PrevLoop" mayFocus='true' mayCancelMute='true' tree='Track'/>
  <Function name="PrevTrack" tree='Track'/>
  <Function name="Realign" mayFocus='true' mayCancelMute='true' mayConfirm='true' tree='Track'/>
  <Function name="Record" sustainable='true' longPressable='true' longHelp='Long press becomes Reset' mayFocus='true' mayCancelMute='true' tree='Recording'/>
  <Function name="Redo" mayFocus='true' mayCancelMute='true' mayConfirm='true' tree='Track'/>
  <!-- this one needs work, either fix it or get rid of it -->
  <Function name="Rehearse" sustainable='true' mayFocus='true' mayCancelMute='true'
            tree='Recording' options='noBinding'/>
  <Function name="Replace" sustainable='true' mayFocus='true' mayCancelMute='true' mayConfirm='true' tree='Recording'/>
  <!-- core has this as mayConfirm, why? -->
  <Function name="Reset" mayFocus='true' tree='Track'/>
  <Function name="Restart" mayFocus='true' mayCancelMute='true' mayConfirm='true' tree='Movement'/>
  <Function name="RestartOnce" mayFocus='true' mayCancelMute='true' tree='Movement'/>
  <Function name="Reverse" sustainable='true' mayFocus='true' mayCancelMute='true' mayConfirm='true' tree='Movement'/>
  <!-- core has this as mayFocus, don't think that's relevant -->
  <Function name="SaveCapture" tree='Utility'/>
  <Function name="SaveLoop" tree='Utility'/>
  <Function name="Shuffle" mayFocus='true' mayCancelMute='true' tree='Recording'/>
  <Function name="SlipForward" mayFocus='true' mayCancelMute='true' tree='Movement'/>
  <Function name="SlipBackward" mayFocus='true' mayCancelMute='true' tree='Movement'/>
  <Function name="Solo" mayFocus='true' tree='Track'/>
  <Function name="SpeedDown" mayFocus='true' mayCancelMute='true' tree='Speed'/>
  <Function name="SpeedNext" mayFocus='true' mayCancelMute='true' tree='Speed'/>
  <Function name="SpeedCancel" mayFocus='true' mayCancelMute='true' tree='Speed'/>
  <Function name="SpeedPrev" mayFocus='true' mayCancelMute='true' tree='Speed'/>
  <Function name="SpeedStep" mayFocus='true' mayCancelMute='true' tree='Speed'/>
  <Function name="SpeedUp" mayFocus='true' mayCancelMute='true' tree='Speed'/>
  <!-- why is this sustainable? -->
  <Function name="SpeedToggle" sustainable='true' mayFocus='true' mayCancelMute='true' tree='Speed'/>
  <!-- core has this mayFocus -->
  <Function name="StartCapture" tree='Utility'/>
  <Function name="StartPoint" mayFocus='true' mayCancelMute='true' tree='Editing'/>
  <!-- core has this mayFocus -->
  <Function name="StopCapture" tree='Utility'/>
  <Function name="Stutter" sustainable='true' mayFocus='true' mayCancelMute='true' tree='Editing'/>
  <Function name="Substitute" sustainable='true' mayFocus='true' mayCancelMute='true' tree='Editing'/>

  <Function name="SUSInsert" sustainable='true' mayFocus='true' mayCancelMute='true' tree='Sustaining'/>
/>
  <Function name="SUSMultiply" sustainable='true' mayFocus='true' mayCancelMute='true' tree='Sustaining'/>
  <Function name="SUSMute" sustainable='true' mayFocus='true' tree='Sustaining'/>
  <Function name="SUSMuteRestart" sustainable='true' mayFocus='true' tree='Sustaining'/>
  <Function name="SUSNextLoop" sustainable='true' mayFocus='true' mayCancelMute='true' tree='Sustaining'/>
  <Function name="SUSOverdub" sustainable='true' mayFocus='true' mayCancelMute='true' tree='Sustaining'/>
  <Function name="SUSPrevLoop" sustainable='true' mayFocus='true' mayCancelMute='true' tree='Sustaining'/>
  <Function name="SUSRecord" sustainable='true' mayFocus='true' mayCancelMute='true' tree='Sustaining'/>
  <Function name="SUSReplace" sustainable='true' mayFocus='true' mayCancelMute='true' tree='Sustaining'/>
  <Function name="SUSReverse" sustainable='true' mayFocus='true' mayCancelMute='true' tree='Sustaining'/>
  <Function name="SUSSpeedToggle" sustainable='true' mayFocus='true' mayCancelMute='true' tree='Sustaining'/>
  <Function name="SUSStutter" sustainable='true' mayFocus='true' mayCancelMute='true' tree='Sustaining'/>
  <Function name="SUSSubstitute" sustainable='true' mayFocus='true' mayCancelMute='true' tree='Sustaining'/>
  <Function name="SUSUnroundedInsert" sustainable='true' mayFocus='true' mayCancelMute='true' tree='Sustaining'/>
  <Function name="SUSUnroundedMultiply" sustainable='true' mayFocus='true' mayCancelMute='true' tree='Sustaining'/>
  <Function name="SyncStartPoint" mayFocus='true' mayCancelMute='true' tree='Sync'/>
  
  <!-- Formerly TrackN, Track1, etc. -->
  <Function name="SelectTrack"
            argumentHelp="Track Number: 1-16" tree='Track'/>
  
  <Function name="TrackCopy" tree='Track'/>
  <Function name="TrackCopyTiming" tree='Track'/>
  <!-- this was marked sustainable for awhile, I think at one time a longPress of this
       would remove the group assignment, it doesn't any more but that's interesting  -->
  <Function name="TrackGroup" mayFocus='true' tree='Track'/>
  <Function name="TrackReset" mayFocus='true' tree='Editing'/>
  <Function name="TrimEnd" mayFocus='true' mayCancelMute='true' tree='Editing'/>
  <Function name="TrimStart" mayFocus='true' mayCancelMute='true' tree='Editing'/>
  <Function name="Undo" mayFocus='true' mayCancelMute='true' mayConfirm='true' tree='Editing'/>
  <Function name="WindowBackward" mayFocus='true' mayCancelMute='true' tree='Movement'/>
  <Function name="WindowForward" mayFocus='true' mayCancelMute='true' tree='Movement'/>
  <Function name="WindowStartBackward" mayFocus='true' mayCancelMute='true' tree='Movement'/>
  <Function name="WindowStartForward" mayFocus='true' mayCancelMute='true' tree='Movement'/>
  <Function name="WindowEndBackward" mayFocus='true' mayCancelMute='true' tree='Movement'/>
  <Function name="WindowEndForward" mayFocus='true' mayCancelMute='true' tree='Movement'/>

  <!-- why aren't the next two visible? -->
  <Function name="UpCycle" mayFocus='true' tree='MIDI' options='noBinding'/>
  <Function name="DownCycle" mayFocus='true' tree='MIDI' options='noBinding'/>
  <Function name="SetCycles" tree='MIDI' options='noBinding'/>
  <Function name="Start" tree='Movement' mayQuantize='true'/>
  <Function name="Stop" tree='Movement' mayQuantize='true'/>

  <!-- file oriented functions -->
  <Function name="LoadMidi" level='ui' tree='ui'/>
  
  <!-- various diagnostic functions for testing -->
  
  <!-- core has this as mayFocus -->
  <Function name="TraceStatus" tree='Utility' hidden='true'/>

  <!-- new one for MIDI structure dumping -->
  <Function name="Dump" tree='Utility'/>

  <!-- not sure where this one should go -->
  <Function name="SamplePlay" tree='Utility'/>

  <!-- MIDI specific -->

  <Function name="MidiResize" midi='true' mayFocus='true'  tree='MIDI'/>
  <Function name="MidiHalfspeed" midi='true' mayFocus='true' mayQuantize='true' tree='MIDI'/>
  <Function name="MidiDoublespeed" midi='true' mayFocus='true' mayQuantize='true' tree='MIDI'/>

  <Function name='TransportStart' level='kernel' tree='Transport'/>
  <Function name='TransportStop' level='kernel' tree='Transport'/>
  <Function name='TransportTap' level='kernel' tree='Transport'/>
  <Function name="SyncMasterTrack" level='kernel' tree='Transport'/>
  <Function name="SyncMasterTransport" level='kernel' tree='Transport'/>

  <!-- Session Control
       Sessions may also be loaded with structure bindings.
   -->
  <Function name="LoadSession" level='ui'/>
  <Function name="SaveSession" level='ui'/>
  
  <!--
  Parameter type=int is assumed unless specified
  scope=global implies noBinding unless bindable is on

  Need to think more about internal vs. binding ranges
  binding usually expectes 1 based object numbers, but internally
  zero is used inconsntently.  Now that we're standardizing on ordinals
  for as much as we can, start using ordinals for ranges? So
  instead of 1-16 it is 0-15?  A more useful concept would just be range=128
  rather than low/high.
  -->

  <!-- UI Functions -->

  <Function name="UIParameterUp" level='ui'/>
  <Function name="UIParameterDown" level='ui'/>
  <Function name="UIParameterInc" level='ui'/>
  <Function name="UIParameterDec" level='ui'/>
  <Function name="ReloadScripts" level='ui'/>
  <Function name="ReloadSamples" level='ui'/>
    
  <Function name="ShowPanel" level='ui'/>
  <Function name="Message" level='ui' options='noBinding'/>
    
  <Function name="AddButton" level='ui' hidden='true'/>
  <Function name="Listen" level='ui' hidden='true'/>

  <!-- =======================================================================
       PRESET
       ============================================================================ -->

  <!-- These are all effectively Track scope parameters.  They once lived in the Preset.
       They are mostly options for the fundamental looping functions with
       a few track configuration options mixed in.

  -->

  <ParameterScope name='preset' query='true'>
     
    <Parameter name='subcycles' low='1' high='128' tree='Quantize'/>

    <Parameter name='multiplyMode' values='normal,simple' tree='Functions' track='audio'/>

    <Parameter name='shuffleMode' values='reverse,shift,swap,random' tree='Functions'/>

    <Parameter name='altFeedbackEnable' type='bool' tree='Mixer' track='audio'/>

    <Parameter name='emptyLoopAction'
               values='none,record,copy,copyTime'
               valueLabels='None,Record,Copy Sound,Copy Timing'
               tree='Switch'/>

    <Parameter name='emptyTrackAction'
               values='none,record,copy,copyTime'
               valueLabels='None,Record,Copy Sound,Copy Timing'
               tree='Switch'/>

    <Parameter name='trackLeaveAction'
               values='none,cancel,wait'
               valueLabels='None,Cancel Current Mode,Cancel and Wait'
               tree='Switch'/>

    <Parameter name='loopCount' type='int' options='dynamic,noBinding'
               low='1' high='32'
               defaultValue='4'
               tree='General'/>
    
    <Parameter name='muteMode' values='continue,start,pause'
               tree='Functions'/>
    
    <Parameter name='muteCancel'
               values='never,edit,trigger,effect,custom,always'
               valueLabels='Never,Edits,Triggers,Effects,Custom,Always'
               tree='Functions'/>

    <Parameter name='overdubQuantized' type='bool'
               tree='Quantize'/>

    <Parameter name='quantize'
               values='off,subCycle,cycle,loop'
               valueLabels='Off,Subcycle,Cycle,Loop'
               tree='Quantize'/>

    <Parameter name='bounceQuantize'
               values='off,subCycle,cycle,loop'
               valueLabels='Off,Subcycle,Cycle,Loop'
               tree='Quantize' track='audio'/>

    <Parameter name='recordResetsFeedback' type='bool'
               tree='Functions' track='audio'/>

    <Parameter name='speedRecord' type='bool'
               tree='Functions' track='audio'/>

    <Parameter name='roundingOverdub' type='bool'
               tree='Functions'/>

    <Parameter name='switchLocation'
               values='follow,restore,start,random'
               tree='Switch'/>

    <Parameter name='returnLocation'
               values='follow,restore,start,random'
               tree='Switch'/>

    <Parameter name='switchDuration'
               values='permanent,once,onceReturn,sustain,sustainReturn'
               tree='Switch'/>
    
    <Parameter name='switchQuantize'
               values='off,subCycle,cycle,loop,confirm,confirmSubCycle,confirmCycle,confirmLoop'
               valueLabels='Off,Subcycle,Cycle,Loop,Confirm,Confirm Subcycle,Confirm Cycle,Confirm Loop'
               tree='Quantize'/>

    <Parameter name='timeCopyMode' values='play,overdub,multiply,insert'
               tree='Switch'/>

    <Parameter name='soundCopyMode' values='play,overdub,multiply,insert'
               tree='Switch'/>

    <Parameter name='switchVelocity' type='bool' tree='Switch' track='audio'/>

    <Parameter name='maxUndo' options='noBinding' tree='Functions'/>
    <Parameter name='maxRedo' options='noBinding' tree='Functions'/>
    
    <Parameter name='noFeedbackUndo' type='bool' options='noBinding'
               tree='Advanced' track='audio'/>
    <Parameter name='noLayerFlattening' type='bool' options='noBinding'
               tree='Advanced' track='audio'
               query='false'/>
    
    <Parameter name='speedSequence' type='string' options='noBinding'
               tree='Effects' track='audio'/>
    <Parameter name='speedShiftRestart' type='bool' options='noBinding'
               tree='Effects' track='audio'/>
    <Parameter name='pitchSequence' type='string' options='noBinding'
               tree='Effects' track='audio'/>
    <Parameter name='pitchShiftRestart' type='bool' options='noBinding'
               tree='Effects' track='audio'/>
    <Parameter name='speedStepRange' low='1' high='48' options='noBinding'
               tree='Effects' track='audio'/>
    <Parameter name='speedBendRange' low='1' high='12' options='noBinding'
               tree='Effects' track='audio'/>
    <Parameter name='pitchStepRange' low='1' high='48' options='noBinding'
               tree='Effects' track='audio'/>
    <Parameter name='pitchBendRange' low='1' high='12' options='noBinding'
               tree='Effects' track='audio'/>
    <Parameter name='timeStretchRange' low='1' high='12' options='noBinding'
               tree='Effects' track='audio'/>
    
    <Parameter name='slipMode'
               values='subCycle,cycle,start,relSubCycle,relCycle,time'
               tree='Functions'/>

    <Parameter name='slipTime' high='128'
               tree='Functions'/>
    
    <!-- StringList
         List of functions that are sustainable.  Not configurable any more
         but could make this a FunctionProperties flag like the three former global parameters.
         <Parameter name='sustainFunctions' type='string' multi='true' options='noBinding'/>
    -->

    <Parameter name='recordTransfer' values='off,follow'
               tree='Switch/Transfer'/>
    <Parameter name='overdubTransfer' values='off,follow,restore'
               tree='Switch/Transfer'/>
    <Parameter name='reverseTransfer' values='off,follow,restore'
               tree='Switch/Transfer'/>
    <Parameter name='speedTransfer' values='off,follow,restore'
               tree='Switch/Transfer'/>
    <Parameter name='pitchTransfer' values='off,follow,restore'
               tree='Switch/Transfer'/>

    <Parameter name='windowSlideUnit' values='loop,cycle,subcycle,msec,frame'
               tree='Functions'/>
    <Parameter name='windowEdgeUnit' values='loop,cycle,subcycle,msec,frame'
               tree='Functions'/>
    
    <Parameter name='windowSlideAmount' low='1' high='128' tree='Functions' />
    <Parameter name='windowEdgeAmount' low='1' high='128' tree='Functions'/>

    <!-- DEPRECATED: keep these for temporary documentation but once we're sure
         core code no longer needs them they can be deleted
         -->
    
    <!-- replaced by EmptyLoopAction
         <Parameter name='autoRecord' type='bool' options='noBinding'/>
    -->

    <!-- insertMode=Sustain replaced with SustainFunctions
         <Parameter name='insertMode'
         values='rehearse,replace,substitute,halfspeed,reverse,insert,sustain' />
    -->

    <!-- now AltFeedbackEnables
         <Parameter name='interfaceMode'
         values='loop,delay,expert,stutter,in,out,replace,flip' />
    -->

    <!-- now EmptyLoopAction
         <Parameter name='loopCopy' values='off,timing,sound' />
    -->
    
    <!-- replaced with OverdubQuantized and SustainFunctions
         <Parameter name='overdubMode' values='toggle,sustain,quantized' />
    -->

    <!-- replaced by SustainFuntions and RecordResetsFeedback
         <Parameter name='recordMode' values='toggle,sustain,safe' />
    -->

    <!-- replaced with SwitchLocation, SwitchDuration, and ReturnLocationn
         <Parameter name='samplerStyle' values='run,start,once,attack,continuous' />
    -->

    <!-- replaced by EmptyTrackAction
         <Parameter name='trackCopy' values='off,timing,sound' />
    -->

  </ParameterScope>

  <!-- =======================================================================
       System Global
       ============================================================================ -->
  
  <!-- A few things that live outside the session in the system.xml file.
       May want more of the session globals in here too.
       Ugh, some of these must live in the session gecause they're settable from
       scripts and that's where the kernel gets them.  If you move them outside
       then the doAction handlers in the kernel need to go there to set them
       -->
  <ParameterScope name='global'>
    
    <Parameter name='inputLatency' options='noBinding' query='true'>
      The number of samples to use for input latency adjustments.  Overrides
      what is reported by the container for the selected audio device.
      This arguably belongs in devices.xml since it is related to the audio devices
      and/or host application.
    </Parameter>
    
    <Parameter name='outputLatency' options='noBinding' query='true'>
      The number of samples to use for output latency adjustments.  Overrides
      what is reported by the container for the selected audio device.
    </Parameter>
    
    <Parameter name='saveLayers' type='bool' options='noBinding'>
      Another project option, move to UI
    </Parameter>

  </ParameterScope>    

  <!-- =======================================================================
       Session Global
       ============================================================================ -->

  <!-- The next two sections define the parameters that are expected to be used in
       Sessions.  These are the ones that will be made public and most will be shown
       in the UI.
       -->

  <ParameterScope name='global'>

    <Parameter name='eventScript' type='string'>
      Temporary prototype for injecting event scripts into the kernel.
      Continue support for awhile.
    </Parameter>
    
    <Parameter name='noiseFloor' type='int' options='noBinding' defaultValue='13'>
      Used by Loop to determine whether a layer can be suppressed because it
      has no significant new content.  Has a code default to 13 if zero.
    </Parameter>

    <Parameter name='longPress' low='250' high='10000' options='noBinding' query='true' defaultValue='500'>
      The amount of time in milliseconds a trigger can be held before activating long-press behavior.
      Belongs in UIConfig with other Binding parameters.
    </Parameter>
    
    <Parameter name='longDisable' type='bool' options='noBinding'>
      During debugging it is really annoying to have long-press behavior firing
      when we're single stepping so allow it to be turned off.
    </Parameter>
    
    <Parameter name='monitorAudio' type='bool' query='true'>
      Used by Track to enable through monitoring.  Should move this up.
    </Parameter>
    
    <Parameter name='spreadRange' low='1' high='128' options='noBinding' defaultValue='12'>
      The amount to spread the binding range over adjacent values.
      Belongs in UIConfig with the other BInding parameters.
    </Parameter>
    
    <Parameter name='fadeFrames' high='1024' options='noBinding'>
      Used by some combination of Loop/LayerSegment to adjust the length
      of boundary fades.  Has a code default of 128 which hasnt been changed
      in forever.  Potentially useful but unused.
    </Parameter>
    
    <Parameter name='maxSyncDrift' high='10000' options='noBinding'>
      The amount of drift to allow before we force a Realign
    </Parameter>
    
    <Parameter name='controllerActionThreshold' type='int' options='noBinding'>
      An experiment to specify the level above which a CC must go before
      it becomes an "on" for an action trigger.  If not set, any non-zero value
      triggers the action.
    </Parameter>

    <Parameter name='autoFeedbackReduction' type='bool' options='noBinding'>
      Used by Loop to determine whether feedback should be reduced from 127 to 121
      when in Overdub, Multiply, or Stutter modes.  Defaults to off.
      NOTE: One of the few booleans that would be better defaulting to ON.
    </Parameter>
    
    <Parameter name='isolateOverdubs' type='bool' options='noBinding'>
      Formerly shown as "No Layer Flattening".  Considered experimental and hasnt
      been exposed in a long time.  Still potentially useful but hidden.
    </Parameter>

    <!-- These were once defined in the Setup but they are effectively global -->

    <!-- Unclear if we need this, it would take the place of activeSetup and
         make it accessible to Instant Parameters, but I'm not liking reinforcing
         the notion that you can swap sessions easily.
    -->
    <Parameter name='activeSession' type='structure' structure='Session'
               options='noBinding,transient'/>

    <!-- This looks  like it would be Session::defaultPreset but it isn't.
         There is no equivalent in the Setup model since defaultPreset is OVERRIDDEEND
         by trackPreset, they don't combine.
         -->
    <Parameter name='sessionOverlay'
               type='structure' structure='Overlay'
               displayType='combo' displayHelper='parameterSet'
               options='noBinding'>
    </Parameter>
    
  </ParameterScope>

  <!-- =======================================================================
       Session Track
  ============================================================================ -->

  <ParameterScope name='track' query='true'>

    <!-- The first few are the noDefault parameters, they may not have a session default value
         and must be specified for each track individually
    -->

    <!-- The name is not actually stored in the ValueSet, it will be a top-level
         property of the Session::Track object.  But it can be trreated as if
         it were a normal parameter.  -->
    <Parameter name='trackName' type='string' options='noBinding,noDefault,noOverlay' tree='General'/>

    <!-- needs to be defined as a symbol for MclEvaluator and potentially useful for scripts
         though I don't think you should be able to set it?
         This is actually interesting and would be a different way to set it rather than the
         weird way Session Editor does it, but that's sensitive right now
    -->
    <Parameter name='trackType' values='audio,midi' options='noBinding,noDefault,noOverlay'/>

    <Parameter name='trackGroup' tree='General'
               options='noBinding,noDefault,dynamic,resetRetain'
               displayType='combo' displayHelper='trackGroup'/>

    <Parameter name='focus' type='bool' options='resetRetain,noBinding,noDefault' tree='General'/>

    <!-- hide these for now, they were a MIDI experiment that will become more interesting
         once sessions can contain content, maybe just a "locked" flag -->
    
    <!-- prevents the track from being included in GlobalReset -->
    <Parameter name='trackNoReset' type='bool' track='Midi' 
               options='noBinding,noDefault'/>
    
    <!-- prevents the track from being modified -->
    <Parameter name='trackNoModify' type='bool' track='Midi'
               options='noBinding,noDefault'/>
    
    <!-- started with noDefault but that isn't accurate.  There needs to be a default trackOverlay
         that means the same thing as the old Setup::defaultPreset.  If a track overrides this
         it is the same as SetupTrack::trackPreset
         -->
    <Parameter name='trackOverlay' tree='Overlay'
               type='structure' structure='Overlay'
               displayType='combo' displayHelper='parameterSet'
               options='noBinding,noOverlay,resetRetain'/>

    <!-- the replacement for oldSyncSource defined SyncSource in SyncConstants.h -->
    <Parameter name='syncSource' values='none,transport,track,host,midi,master'
               tree='Sync'/>

    <!-- the SyncSource to use when syncSource is Master and there is already a master -->
    <Parameter name='syncSourceAlternate' values='track,transport'
               options='noBinding'/>
    
    <!-- the replacements for slaveSyncUnit, used for all except track -->
    <Parameter name='syncUnit' values='beat,bar,loop' tree='Sync'/>
    
    <!-- the replacement for oldTrackSyncUnit -->
    <Parameter name='trackSyncUnit' values='subcycle,cycle,loop' tree='Sync'/>

    <!-- these apply only to Midi tracks ATM -->
    
    <Parameter name='leaderType' tree='Follow' track='midi' options='noBinding'
               values='none,track,trackSyncMaster, transportMaster,focused,host,midi,transport'
               valueLabels='None,Track Number,Track Sync Master,Transport Master,Focused,Host,MIDI In'/>

    <Parameter name='leaderSwitchLocation' options='noBinding' tree='Follow' track='midi'
               values='none,loop,cycle,subcycle'/>
    
    <Parameter name='leaderTrack' type='int'  options='noBinding' track='midi' tree='Follow'/>
    <Parameter name='followRecord' type='bool'  options='noBinding' track='midi' tree='Follow'/>
    <Parameter name='followRecordEnd' type='bool'  options='noBinding' track='midi' tree='Follow'/>
    <Parameter name='followSize' type='bool'  options='noBinding' track='midi' tree='Follow'/>
    <Parameter name='followMute' type='bool'  options='noBinding' track='midi' tree='Follow'/>
    <Parameter name='followQuantizeLocation' type='bool'  options='noBinding' track='midi' tree='Follow'/>
    <Parameter name='followLocation' type='bool'  options='noBinding' track='midi'/>
    <Parameter name='followerStartMuted' type='bool'  options='noBinding' track='midi' tree='Follow'/>
    <!-- these are not currently in the UI, not fully baked -->
    <Parameter name='followCut' type='bool'  options='noBinding' track='midi'/>
    <Parameter name='followRate' type='bool'  options='noBinding' track='midi'/>
    <Parameter name='followDirection' type='bool'  options='noBinding' track='midi'/>
    <Parameter name='followStartPoint' type='bool'  options='noBinding' track='midi'/>
    <Parameter name='followSwitch' type='bool'  options='noBinding' track='midi'/>
    
    <Parameter name='midiInput' track='midi' tree='Midi'
               displayType='combo' displayHelper='midiInput' options='noBinding'/>
    <Parameter name='midiOutput' track='midi' tree='Midi'
               displayType='combo' displayHelper='midiOutput' options='noBinding'/>
    <Parameter name='midiThru' track='midi' tree='Midi'
               type='bool' options='noBinding'/>
    
    <Parameter name='midiChannelOverride' track='midi' tree='Midi'
               values='off,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16'  options='noBinding'/>

    <!-- these are the ones from SetupTrack that we still use -->

    <Parameter name='mono' type='bool' options='noBinding' tree='Ports' track='audio'/>
    
    <Parameter name='input' tree='Mixer' track='audio'
               high='127' defaultValue='127'
               options='control,resetRetain,mayFocus'/>
    
    <Parameter name='output' tree='Mixer' track='audio'
               high='127' defaultValue='127'
               options='control,resetRetain,mayFocus'/>
    
    <Parameter name='feedback' tree='Mixer' track='audio'
               high='127' defaultValue='127'
               options='control,resetRetain,mayFocus'/>
    
    <Parameter name='altFeedback' tree='Mixer' track='audio'
               high='127'defaultValue='127'
               options='control,resetRetain,mayFocus'/>
    
    <Parameter name='pan' tree='Mixer' track='audio'
               high='127' defaultValue='64'
               options='control,resetRetain,mayFocus'/>

    <!-- Ports are unusual
         The port numbers can be different for standalone or plugin operation since
         the routing is often different.  The qualified audio/plugin names are used only
         by the SessionEditor during configuration editing so both may be adjusted.
         At runtime, always use the unqualified names and the appropriate set will be selected.
    -->
    <Parameter name='audioInputPort' tree='Ports' track='audio'
               low='0' high='31' displayBase='1' options='noBinding' query='false'/>
    <Parameter name='audioOutputPort' tree='Ports' track='audio'
               low='0' high='31' displayBase='1' options='noBinding' query='false'/>
    <Parameter name='pluginInputPort' tree='Ports' track='audio'
               low='0' high='31' displayBase='1'options='noBinding' query='false'/>
    <Parameter name='pluginOutputPort' tree='Ports' track='audio'
               low='0' high='31' displayBase='1' options='noBinding' query='false'/>

    <Parameter name='inputPort' low='0' high='31' displayBase='1' options='noBinding'/>
    <Parameter name='outputPort' low='0' high='31' displayBase='1' options='noBinding'/>

    <!-- special catagory of parameters availalbe for runtime bindings, but
         not in the configuration files, no get/set code will be generated
         todo: work on these.  The look like parameters to the outside, but internally
         are implemented as functions.  Don't like how this evolved.
    -->
    <Parameter name='speedOctave' high='4'
               options='transient,control,zeroCenter,scheduled'/>
    <Parameter name='speedStep' high='48'
               options='transient,control,zeroCenter,scheduled'/>
    <Parameter name='speedBend' high='8191'
               options='transient,control,zeroCenter,scheduled'/>
    <Parameter name='pitchOctave' high='4'
               options='transient,control,zeroCenter,scheduled'/>
    <Parameter name='pitchStep' high='48'
               options='transient,control,zeroCenter,scheduled'/>
    <Parameter name='pitchBend' high='8191'
               options='transient,control,zeroCenter,scheduled'/>
    <Parameter name='timeStretch' high='8191'
               options='transient,control,zeroCenter,scheduled'/>

  </ParameterScope>
  
  <!-- =======================================================================
       Sync and Transport
       ============================================================================ -->

  <!-- these are effectively all global parameters but give them a specific scope if that
       becomes useful -->

  <!-- not query='true' which means they can't be used with temporary bindings -->

  <ParameterScope name='sync'>

    <!-- These are runtime symbols used for actions.  They may be saved in the session
         and restored, but are not edited in the SessionEditor
    -->
    <Parameter name='transportTempo' type='int' level='kernel' defaultValue='90' displayName='Transport Default Tempo'/>
    <Parameter name='transportLength' type='int' level='kernel' options='noBinding'/>

    <!-- accessible transport parameters -->
    <Parameter name='transportBeatsPerBar' type='int' level='kernel' defaultValue='4'/>
    <Parameter name='transportBarsPerLoop' type='int' level='kernel' defaultValue='1'/>
    <Parameter name='transportMidi' type='bool' level='kernel' displayName='Transport Send Midi'/>

    <!-- !! this should actually be an enumeration with default TransportClocksAlways
         and an optional TransportClocksWhenStarted if you want to support the
         old conditional clock sending options -->
    <Parameter name='transportClocks' type='bool' level='kernel' displayName='Transport Send Clocks when Stopped'/>
    
    <Parameter name='transportManualStart' type='bool' level='kernel'/>
    <Parameter name='transportMinTempo' type='int' level='kernel' defaultValue='30'/>
    <Parameter name='transportMaxTempo' type='int' level='kernel' defaultValue='300'/>
    <Parameter name='transportMetronome' type='bool' level='kernel' displayName='Transport Metronome Enable'/>

    <!-- Plugin Host -->
    <Parameter name='hostBeatsPerBar' type='int' level='kernel' defaultValue='4'/>
    <Parameter name='hostBarsPerLoop' type='int' level='kernel' defaultValue='1'/>
    <Parameter name='hostOverride' type='bool' level='kernel' displayName='Host Bar Override'/>

    <!-- Midi In -->
    <Parameter name='midiBeatsPerBar' type='int' level='kernel' defaultValue='4'/>
    <Parameter name='midiBarsPerLoop' type='int' level='kernel' defaultValue='1'/>

    <!-- AutoRecord -->
    <Parameter name='autoRecordUnit' values='beat,bar,loop' level='kernel'/>
    <Parameter name='autoRecordUnits' type='int' low='1' high='64' level='kernel'/>

    <!-- Threshold  Recording -->
    <Parameter name='recordThreshold' type='int' high='8' level='kernel'/>

    <!-- Masters -->
    <Parameter name='trackSyncMaster' type='int' level='kernel' options='dynamic'/>
    <Parameter name='transportMaster' type='int' level='kernel' options='dynamic'/>

  </ParameterScope>
    
  <!-- =======================================================================
       UI
       ============================================================================ -->

  <!-- keep tree paths out of these so they don't show up in the SessionEditor trees
       will probably need another way to do that since the path will be needed when
       binding windows show trees
  -->
  
  <ParameterScope name='UI'>

    <Parameter name='activeLayout' level='UI' type='structure' structure='Layout'/>
    <Parameter name='activeButtons' level='UI' type='structure' structure='Buttons'/>

    <!-- wtf is this?  wouldn't this be multi-valued? -->
    <Parameter name='bindingOverlays' level='UI' type='structure' structure='Bindings'
               options='noBinding'/>
    
  </ParameterScope>
  
  <!-- =======================================================================
       SETUP
       ============================================================================ -->
  
  <!--
      Setup parameters are essentially global parameters but they were managed
      inside multiiple objects that could be swapped rather than a single set
      shared by all Setups.  They are no longer used, replaced by Session parameters
      though there are a few name overlaps.
  -->
  
  <ParameterScope name='setup'>


    <!-- note that this needs "default" as the first enum value even though that's not
         allowed for this parameter since internally it shares the same SyncSource enumeration
         with the syncSource track scope parameter
    -->
    <Parameter name='defaultSyncSource' values='default,none,track,out,host,midi,transport'
               options='noBinding'/>
    <Parameter name='defaultTrackSyncUnit' values='default,subcycle,cycle,loop'
               options='noBinding'/>
    <Parameter name='slaveSyncUnit' values='beat,bar' options='noBinding'/>

    <!-- Don't need to clutter the symbol table with these, they have
         been entirely replaced by the Transport
    -->
    <!--
    <Parameter name='manualStart' type='bool' options='noBinding'/>
    <Parameter name='minTempo' high='500' options='noBinding'/>
    <Parameter name='maxTempo' high='500' options='noBinding'/>
    <Parameter name='beatsPerBar' high='64' options='noBinding'/>
    <Parameter name='muteSyncMode' values='transport,transportClocks,clocks,none' options='noBinding'/>
    -->

    <Parameter name='resizeSyncAdjust' values='none,tempo' options='noBinding'/>
    <Parameter name='speedSyncAdjust' values='none,tempo' options='noBinding'/>
    <Parameter name='realignTime' values='start,bar,beat,now' options='noBinding'/>

    <Parameter name='activeTrack' high='8' options='dynamic,noBinding'>
      In model context, defines the initial active track, almost always zero.
      Range depends on the global trackCount parameter.
      In runtime context, this changes the active track for focus and display
      WITHOUT incurring Track Copy behavior.
      todo: Compare this with the TrackSelect function which I'd like to
      start calling TrackShift.  

      We also have an ordinal problem.  Internally tracks are numbered from zero but
      externally they are always numbered from 1.  Need to work this out.
    </Parameter>
    
  </ParameterScope>

  <!-- =======================================================================
       TRACK
  ============================================================================ -->

  <ParameterScope name='track'>
    
    <!-- this used to be a number
    <Parameter name='group' options='dynamic,resetRetain'/>
    -->

    <!-- These have correspondence in the new model, but the enumerations
         are different.  Define these temporarily while transitioning the
         editing pages
    -->
    
    <Parameter name='oldSyncSource' values='default,none,track,out,host,midi,transport'
               options='noBinding'/>
    <Parameter name='oldTrackSyncUnit' values='default,subcycle,cycle,loop'
               options='noBinding'/>

    <!-- this was used for the group name in the Setup days, but trackGroup above should take it's place    -->
    
    <Parameter name='groupName' options='noBinding,dynamic,resetRetain'/>
    
  </ParameterScope>
  
</Symbols>
