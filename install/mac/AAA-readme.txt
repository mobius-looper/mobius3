Fri May 31 09:29:50 2024

Notes on the Mac installer

Files:

build-installer
  This is a shell script that produces the Mobius.pkg installation file.
  It does several file and directory copies to stage things for the pkgbuild
  and productbuild command linke tools which produce the final installation
  package for upload.  Only the final Mobius.pkg file is uploaded, the other
  .pkg files are intermediate packages.

clean-installer
  Shell script to remove intermediate files 

app.plist
  An input file to pkgbuild for the standalone application.
  This was generated by pkgbuild --analyze for the standalone
  Mobius.app.  It has one modification to set BundleIsRelocatable
  to false so it always goes under /Applications.  If you leave this true
  the installer will search for any other Mobius.app it can find and replace
  it rather than putting it in /Applications.  For developers this is often
  buried deep in the Juce project tree which is not where you want it to go.

  There may be ways to make the installer give the user a choice but I didn't
  explore that.

  I didn't see a way to override this on the command line so we can't regenerate
  this in the build-installer script without doing some post editing on it.
  Since this almost never changes, I'm just capturing one and putting it
  under source control so it can be reused every time.

mobius.plist
  An input file to productbuild for the combined installation package.
  This was generated by productbuild --synthesize with a few modifications
  to add a Title, mand examples of adding Readme and Welcome pages.
  To preserve those modifications --synthesize has been commented out
  in build-installer and mobius.plist was placed under source control.

  Note that the names of things in this file were generated and I'm not
  sure about their significance:

    <pkg-ref id="com.circularlabs.Mobius3"/>
    <pkg-ref id="com.circularlabs.Mobius"/>
    <pkg-ref id="com.circularlabs.Mobius-1"/>

  These were probably derived from the build folders and may change if you
  adjust the Juce settings for the various plugin packaging options
  in Projucer.  If you do that and the installer fails, regenerate
  mobius.plist.

mobius.plist.changes
  Summarizes the changes to be made to mobius.plist if you need to regenerate it.

readme-page.txt
  The text of the readme page shown by the installer.

welcome-page.txt
  The text of the welcome page shown by the installer.

notes
  Directory of old notes taken during learning about pkgbuild

old
  Directory containing early experiments with the Packages tool.
  Can be deleted.
  
Temporary Files:

After running build-installer you will see these intermediate files.
They are not under source control and will be removed by clean-installer
If you need to make permanent changes to any of these, check them into
Git, and remove the regeneration of them from build-installer.

app.pkg
au.pkg
au.plist
mobius.plist
vst.pkg
vst.plist
